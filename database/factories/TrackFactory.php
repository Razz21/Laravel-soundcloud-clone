<?php

/** @var \Illuminate\Database\Eloquent\Factory $factory */

use App\Track;
use App\User;
use Faker\Generator as Faker;

$factory->define(Track::class, function (Faker $faker) {
    $users = User::all()->pluck('id')->toArray();
    $title = $faker->sentence(5);
    $slug = Str::slug($title);
    return [
        'user_id' => $faker->randomElement($users),
        'title' => $title,
        'slug' => $slug,
        'description' => $faker->paragraph(),
        'url' => 'tracks/0/index.m3u8',
        'audio_length' => 168,
        'wave' => [
            0.7121967807753347,
            0.2371344366356835,
            0.2194513715710723,
            0.2548175017002947,
            0.2901836318295172,
            0.3034459306279755,
            0.5338925413738381,
            0.560417138970755,
            0.6004307413284968,
            0.6357968714577192,
            0.8536613012922238,
            0.751190206302426,
            0.7025617773747447,
            0.8224892314667875,
            0.907163908410791,
            0.9115846746769445,
            0.7557243255497619,
            0.8137610519156655,
            0.9290410337791886,
            0.9200861482656991,
            0.7652459759691679,
            0.8358648832464294,
            0.8932214917252326,
            0.9379959192926773,
            0.7424620267513036,
            0.6625481750170027,
            0.7429154386760372,
            0.8048061664021762,
            0.6851054182725005,
            0.7112899569258669,
            0.7734073906143732,
            0.7472228519610067,
            0.8273634096576741,
            0.7337338472001816,
            0.7244389027431422,
            0.8490138290637046,
            0.7602584447970983,
            0.7204715484017227,
            0.7068691906597143,
            0.7738608025391067,
            0.7824756291090459,
            0.8092269326683293,
            0.8221491725232375,
            0.6450918159147584,
            0.8048061664021763,
            0.8979823169349356,
            0.8623894808433463,
            0.7602584447970983,
            0.8357515302652458,
            0.7517569712083426,
            0.8493538880072546,
            0.8267966447517568,
            0.6845386533665836,
            0.7429154386760373,
            0.8939016096123327,
            0.8135343459532985,
            0.768873271367037,
            0.7958512808886873,
            0.8537746542734074,
            0.6449784629335753,
            0.7870097483563819,
            0.7779415098617091,
            0.7203581954205395,
            0.8625028338245296,
            0.8049195193833594,
            0.6759238267966446,
            0.8224892314667877,
            0.9201995012468825,
            0.6984810700521424,
            0.8622761278621629,
            0.8579687145771934,
            0.755951031512129,
            0.7247789616866919,
            0.8447064157787348,
            1,
            0.8888007254590794,
            0.9377692133303105,
            0.7338472001813648,
            0.9644071639084107,
            0.9916118793924282,
            0.9116980276581274,
            0.8267966447517568,
            0.9556789843572887,
            0.907050555429608,
            0.9645205168895941,
            0.9825436408977558,
            0.777828156880526,
            0.8940149625935163,
            0.9420766266152802,
            0.9732486964407163,
            0.875878485604171,
            0.8399455905690318,
            0.8802992518703241,
            0.808886873724779,
            0.8537746542734074,
            0.8093402856495129,
            0.7472228519610064,
            0.8801858988891412,
            0.6761505327590116,
            0.7202448424393559,
            0.8050328723645435,
            0.8043527544774425,
            0.7077760145091813,
            0.5785536159600998,
            0.7783949217864431,
            0.7514169122647925,
            0.7736340965767398,
            0.7068691906597147,
            0.6445250510088415,
            0.8400589435502155,
            0.8180684652006348,
            0.653819995465881,
            0.7603717977782818,
            0.8892541373838131,
            0.7559510315121287,
            0.8669236000906824,
            0.7952845159827706,
            0.6938335978236229,
            0.7959646338698707,
            0.8096803445930627,
            0.7026751303559285,
            0.7821355701654953,
            0.8491271820448878,
            0.7824756291090457,
            0.7830423940149623,
            0.7466560870550896,
            0.7914305146225344,
            0.7692133303105871,
            0.942643391521197,
            0.8181818181818179,
            0.6090455678984358,
            0.8759918385853547,
            0.8937882566311496,
            0.7649059170256178,
            0.8135343459532985,
            0.7380412604851506,
            0.7916572205849016,
            0.8625028338245297,
            0.8934481976875994,
            0.7159374291543869,
            0.8003854001360236,
            0.9113579687145772,
            0.6628882339605532,
            0.7735207435955566,
            0.7558376785309454,
            0.8444797098163681,
            0.9293810927227385,
            0.8356381772840625,
            0.7561777374744958,
            0.7380412604851508,
            0.8584221265019268,
            0.9069372024484245,
            0.7782815688052597,
            0.8755384266606211,
            0.9027431421446388,
            0.9421899795964633,
            0.8669236000906823,
            0.9067104964860573,
            0.8755384266606213,
            0.8402856495125822,
            0.7872364543187488,
            0.8534345953298572,
            0.8006121060983904,
            0.9027431421446385,
            0.7824756291090453,
            0.9426433915211972,
            0.6847653593289507,
            0.2813420992972114,
            0.1531398775787804,
            0.139877578780322,
        ],
    ];
});

$factory->afterCreating(Track::class, function ($row, Faker $faker) {
    $ids = range(1, 20);
    shuffle($ids);
    $row->genre()->associate(rand(1, 20)); //random genre
    $row->save();
    $row->tags()->sync(array_slice($ids, 0, rand(0, 5)));
});
